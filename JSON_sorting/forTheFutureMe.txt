Don't know why it works with Promise.all but in this case I should have used Promise.allSettled